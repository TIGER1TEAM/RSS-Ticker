<!DOCTYPE html>
<html>
<head>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Doto:wght,ROND@900,100&family=Iceberg&family=Jersey+10&family=Noto+Sans:ital,wght@0,100..900;1,100..900&family=VT323&display=swap" rel="stylesheet">

<style>
html, body {
  margin: 0;
  padding: 0;
}

#bandeau {
  position: fixed;
  width: 100%;
  bottom: 0;
  background-color: #000000;
  color: #ffffff;
  text-align: left;
  font-size: 45px;
  font-weight: bold;
  overflow: hidden;
  font-family: 'Noto Sans', serif;
  height: 80px; /* adjust depending on font size */
  display: flex;
  align-items: left;
  justify-content: left;
}

#rssText {
  position: relative;
  width: 100%;
  height: 100%;
  display: flex;               /* flexbox to center text */
  align-items: left;
  justify-content: left;
  overflow: hidden;
}

#rssText p {
  position: absolute;
  margin: 0;
  padding: 0 20px;
  max-width: 100%;             /* donâ€™t shrink into a column */
  text-align: left;
  
  opacity: 0;
  transform: translateY(100%); /* start off bottom */
  transition: transform 0.6s ease-out, opacity 0.6s ease-out;

  white-space: normal;         /* allow wrapping naturally */
  word-break: break-word;      /* break long words if needed */
}
#rssText p.active {
  opacity: 1;
  transform: translateY(0);    /* slide up into place */
}
#rssText p.exit {
  opacity: 0;
  transform: translateY(-100%); /* slide up and out */
}
</style>
</head>
<body>
  
<div id="bandeau">
  <div id="rssText">Loading...</div>
</div>

<script>
let titles = [];
let index = 0;
let interval;

function fetchRSS() {
  fetch('https://api.rss2json.com/v1/api.json?rss_url=https://tiger1team.github.io/RSS-gametime/rss.xml')
    .then(response => response.json())
    .then(data => {
      titles = data.items.map(item => item.title);
      index = 0;
      showNext();
      if (interval) clearInterval(interval);
      interval = setInterval(showNext, 4000); // change every 4s
    })
    .catch(error => console.error('Error :', error));
}

function showNext() {
  const container = document.getElementById('rssText');
  container.innerHTML = ""; // clear old

  const p = document.createElement('p');
  p.textContent = titles[index].replace(/\s+/g, ' ');
  container.appendChild(p);

  // Trigger reflow for animation
  void p.offsetWidth;

  p.classList.add('active');

  // prepare exit animation
  setTimeout(() => {
    p.classList.add('exit');
  }, 3000);

  index = (index + 1) % titles.length;
}

window.addEventListener('load', () => {
  fetchRSS();
  setInterval(fetchRSS, 600000); // refresh feed every 10 minutes
});
</script>

</body>
</html>
